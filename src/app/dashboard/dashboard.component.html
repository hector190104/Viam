

<div class="dashboard-container">
  <h2 class="dashboard-title">{{ showForm ? 'Registro de Cursos' : 'Panel de Cursos' }}</h2>
  <div *ngIf="!showForm" style="margin-bottom:1.5rem;">
    <button class="add-course-btn" (click)="agregarCurso()">
      Agregar Curso
    </button>
  </div>
  <div *ngIf="successMsg" class="wizard-error" style="background:linear-gradient(90deg,#4f8cff 0%,#b16cea 100%)">{{ successMsg }}</div>
  <div *ngIf="errorMsg" class="wizard-error">{{ errorMsg }}</div>

  <!-- Formulario para agregar curso -->
  <form *ngIf="showForm" [formGroup]="cursoForm" (ngSubmit)="submitCurso()" class="modal-form" style="width:100%;max-width:420px;margin:auto;padding:24px 24px 16px 24px;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,0.10);border:1px solid #e0e0e0;">
    <label style="margin-top:8px;">Título del curso:</label>
    <input type="text" formControlName="titulo" placeholder="Título" />
    <label>Slug (URL amigable):</label>
    <input type="text" formControlName="slug" placeholder="Ej: introduccion-programacion" />
    <small style="color:#888;margin-bottom:8px;">Versión corta y sin espacios del título, usado en la URL. <b>Ejemplo: 'mi-curso-avanzado'</b> (sin espacios, minúsculas, guiones)</small>
    <label>Descripción:</label>
    <input type="text" formControlName="descripcion" placeholder="Descripción" />
    <label>Nivel:</label>
    <select formControlName="nivel">
      <option value="">Selecciona nivel</option>
      <option value="PRINCIPIANTE">Principiante</option>
      <option value="INTERMEDIO">Intermedio</option>
      <option value="AVANZADO">Avanzado</option>
    </select>
    <label>URL Imagen (opcional):</label>
    <input type="text" formControlName="urlImagen" placeholder="URL de imagen" />
    <label>Duración (horas):</label>
    <input type="number" formControlName="duracionHoras" min="1" placeholder="Duración en horas" />
    <label>Puntaje máximo:</label>
    <input type="number" formControlName="puntajeMaximo" min="1" placeholder="Puntaje máximo" />
    <label>ID Instructor:</label>
    <input type="number" formControlName="instructorId" min="1" placeholder="ID del instructor" />
    <div style="display:flex;justify-content:flex-end;gap:12px;margin-top:18px;">
      <button type="submit" class="add-course-btn" [disabled]="loading || !cursoForm.valid">
        <i class="fa fa-check"></i> Registrar Curso
      </button>
      <button type="button" class="cancel-btn" style="padding:12px 18px;" (click)="agregarCurso()">Cancelar</button>
    </div>
  </form>

  <!-- Loader -->
  <div *ngIf="loading && !showForm" class="wizard-error" style="background:linear-gradient(90deg,#b16cea 0%,#4f8cff 100%)">
    <i class="fa fa-spinner fa-spin"></i> Cargando cursos...
  </div>

  <!-- No hay cursos -->
  <div *ngIf="cursos.length === 0 && !loading && !showForm" class="wizard-error">
    <i class="fa fa-exclamation-circle"></i> No hay cursos registrados.
  </div>

  <!-- Listado de cursos -->
  <div *ngIf="cursos.length > 0 && !showForm" class="courses-list">
    <div *ngFor="let curso of cursos" class="course-card" (click)="verCurso(curso)">
      <img *ngIf="curso.urlImagen" [src]="curso.urlImagen" alt="Imagen curso" class="course-image" />
      <div class="course-title">{{ curso.titulo || curso.nombre }}</div>
      <div class="course-description">{{ curso.descripcion }}</div>
      <div class="course-meta">
        <span>{{ curso.nivel || 'Sin nivel' }}</span>
        <span>{{ curso.duracionHoras }}h</span>
        <span>{{ curso.puntajeMaximo }} pts</span>
      </div>
    </div>
  </div>
</div>
